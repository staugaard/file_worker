#!/usr/bin/env ruby

require "rubygems"
require "bundler"
Bundler.require

require 'file_worker/cli'

scanner = FileWorker::Cli.build_scanner

scanner.on_error do |file_name, exception|
  $stderr.puts("Failed to process #{file_name}")
  $stderr.puts(exception)
  $stderr.puts(exception.backtrace.join("\n"))
end

scanner.start
